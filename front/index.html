<!DOCTYPE html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
<html>
  <head>
      <link rel="stylesheet" href="style.css">
  </head>


  <body>
  <div class="search-container">
      <div class="topnav">
        <a class="active" href="#home">mIFology</a>
        <a href="#about">Petit projet qui centralise des donnees sur des personnages mythologiques.</a>  
      </div>
      <p></p><p></p><p></p>
      <input type="text" placeholder="Search.." id="search">
      <button type="submit" onclick="callAPI()"></button>
  </div>
  <div id="content"></div>

  <br/><br/><br/>

  <table style="width:70%" align="center">
    <tr>
      <td><img align="left"src="http://commons.wikimedia.org/wiki/Special:FilePath/Jupiter_Smyrna_Louvre_Ma13.jpg?width=300" alt="Zeus" style="width:150px;height:180px;">  <div id="godName"> <h1>Zeus</h1> </div> <div id="godFunction"> Dieu du tonnerre et de la foudre </div></td>
    </tr>
  </table>

  <table style="width:70%" align="center">

    <tr>
      <td><b>Gender</b></td>
      <td><div id="godGender">Male</div></td> 
    </tr>

    <tr>
      <td><b>Abode</b></td>
      <td><div id="godAbode">L'olympe</div></td> 
    </tr>

    <tr>
      <td><b>Symbol</b></td>
      <td><div id="godSymbol">Symbole de zeus</div></td> 
    </tr>

    <tr>
      <td><b>Consort</b></td>
      <td><div id="godConsort">Hera and various others</div></td> 
    </tr>

    <tr>
      <td><b>Parents</b></td>
      <td><div id="godParents">Cronus and Rhea</div></td> 
    </tr>

    <tr>
      <td><b>Children</b></td>
      <td><div id="godChildren">Aeacus, Ares, Athena, Apollo, Artemis, Aphrodite, Dardanus, Dionysus, Eileithyia, Enyo, Eris, Hebe, Hermes, Heracles, Helen of Troy, Hephaestus, Perseus, Minos, the Muses, the Horae, the Moirai, the Graces</div></td> 
    </tr>

    <tr>
      <td><b>Siblings</b></td>
      <td><div id="godSiblings">Hera Poseidon...</div></td> 
    </tr>

    <tr>
      <td><b>Video games appearences</b></td>
      <td><div id="godSiblings">God of war, .....</div></td> 
    </tr>

    <tr>
      <td><b>Movies appearences</b></td>
      <td><div id="godSiblings">Odyssey, .....</div></td> 
    </tr>


  </table>

  <br/> <br/> <br/>

  <script>
      var jsonInfo;
      function callAPI(){
        const url = "http://localhost:3000/url/"
        var value = document.getElementById("search").value;
        var xhr = createCORSRequest("get", url+value);
        // Track the state changes of the request
        xhr.onreadystatechange = function(){
            // Ready state 4 means the request is done
            if(xhr.readyState === 4){
            // 200 is a successful return
                if(xhr.status === 200){
                    jsonInfo = JSON.parse(xhr.responseText);
                    console.log(jsonInfo);                     
                    console.log(jsonInfo["image"]["value"]); // 'Accéder à un élément particulier'
                }else{
                    alert('Error: '+xhr.status); // An error occurred during the request
                }
            }
        }

        xhr.send(null)
    }

    function createCORSRequest(method, url){
        var xhr = new XMLHttpRequest();
        if ("withCredentials" in xhr){
            xhr.open(method, url, true);
        } else if (typeof XDomainRequest != "undefined"){ // if IE use XDR
            xhr = new XDomainRequest();
            xhr.open(method, url);
        } else {
            xhr = null;
        }
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        return (xhr);
      }

  </script>
</body>
</html>
