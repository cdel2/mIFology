<!DOCTYPE html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
<html>
<body>
  <head>
      <link rel="stylesheet" href="style.css">
  </head>

  <div class="search-container">
      <div class="topnav">
        <a class="active" href="#home">mIFology</a>
        <a href="#about">Petit projet qui centralise des donnees sur des personnages mythologiques.</a>  
      </div>
      <p></p><p></p><p></p>
      <input type="text" placeholder="Search.." id="search">
      <button type="submit" onclick="callAPI()"></button>
  </div>
  <div id="content"></div>

  <script>
      var jsonInfo;
      function callAPI(){
        const url = "http://localhost:3000/url/"
        var value = document.getElementById("search").value;
        var xhr = createCORSRequest("get", url+value);
        // Track the state changes of the request
        xhr.onreadystatechange = function(){
            // Ready state 4 means the request is done
            if(xhr.readyState === 4){
            // 200 is a successful return
                if(xhr.status === 200){
                    jsonInfo = JSON.parse(xhr.responseText);
                    console.log(jsonInfo);                     
                    console.log(jsonInfo["image"]["value"]); // 'Accéder à un élément particulier'
                }else{
                    alert('Error: '+xhr.status); // An error occurred during the request
                }
            }
        }

        xhr.send(null)
    }

    function createCORSRequest(method, url){
        var xhr = new XMLHttpRequest();
        if ("withCredentials" in xhr){
            xhr.open(method, url, true);
        } else if (typeof XDomainRequest != "undefined"){ // if IE use XDR
            xhr = new XDomainRequest();
            xhr.open(method, url);
        } else {
            xhr = null;
        }
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        return (xhr);
      }

  </script>
</body>
</html>
