<!DOCTYPE html>
<html>
<body>
  <head>
      <link rel="stylesheet" href="style.css">
  </head>

  <h1>mIFology</h1>

  <p>Petit projet qui centralise des donnees sur des personnages mythologiques.</p>

  <div class="search-container">
      <input type="text" placeholder="Search.." id="search">
      <button type="submit" onclick="callAPI()"></button>
  </div>
  <div id="content"></div>

  <script>
      function callAPI(){
        const url = "http://localhost:3000/url/"
        var value = document.getElementById("search").value;
        var xhr = createCORSRequest("get", url+value);
        // Track the state changes of the request
        xhr.onreadystatechange = function(){
            // Ready state 4 means the request is done
            if(xhr.readyState === 4){
            // 200 is a successful return
                if(xhr.status === 200){
                    console.log(JSON.parse(xhr.responseText)); // 'This is the returned text.'
                }else{
                    alert('Error: '+xhr.status); // An error occurred during the request
                }
            }
        }

        xhr.send(null)
    }

    function createCORSRequest(method, url){
        var xhr = new XMLHttpRequest();
        if ("withCredentials" in xhr){
            xhr.open(method, url, true);
        } else if (typeof XDomainRequest != "undefined"){ // if IE use XDR
            xhr = new XDomainRequest();
            xhr.open(method, url);
        } else {
            xhr = null;
        }
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        return (xhr);
      }

  </script>
</body>
</html>

